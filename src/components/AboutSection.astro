---
import { ProfileCard } from './ui/profile-card';
import AImage from './media/AImage.astro';
import DecryptedText from './DecryptedText';
import TimelineItem from './sections/TimelineItem.astro';
import aboutBg from '../assets/images/about-bg.webp';

interface Props {
  profileImageSrc: string;
}

interface TimelineItemData {
  period: string;
  title: string;
  subtitle?: string;
  url?: string;
  description: string;
  skills?: string[];
  isCurrent?: boolean;
}

const { profileImageSrc } = Astro.props;

const workExperience: TimelineItemData[] = [
  {
    period: "2024 — PRESENT",
    title: "Senior QA Automation Specialist",
    subtitle: "VASS",
    url: "https://vasscompany.com/greece/en/",
    description: "Leading test automation in quality assurance teams for European Commission projects in DG DIGIT, specializing in custom Java-based automation frameworks using Selenium WebDriver.",
    skills: ["Java", "Selenium", "Custom EU Frameworks"],
    isCurrent: true,
  },
  {
    period: "2022 — 2024",
    title: "Full-Stack Developer - QA Lead",
    subtitle: "Upiria",
    url: "https://www.upiria.com",
    description: "Full-stack development and leading QA processes for Upiria startup, delivering scalable solutions with fast delivery cycles and high quality using modern web technologies.",
    skills: ["React", "PHP", "Playwright", "MySQL", "AWS"],
  },
  {
    period: "2018 — 2021",
    title: "Junior QA Automation Engineer",
    subtitle: "SWORD",
    url: "https://www.sword-group.com/greece/",
    description: "Quality assurance and testing automation for European Commission projects, establishing foundational testing practices and automation workflows using Java and Selenium.",
    skills: ["Java", "Selenium", "User Acceptance Testing"],
  },
];

const education: TimelineItemData[] = [
  {
    period: "2018",
    title: "Electrical Engineering and Computer Science",
    subtitle: "AUTh",
    url: "https://www.auth.gr/en",
    description: "Foundation in engineering principles and computer science fundamentals, providing the theoretical and practical knowledge for modern software development and QA automation. Thesis: Automated test engine for RESTful Web Services",
  },
];

const certifications: TimelineItemData[] = [
  {
    period: "2018",
    title: "Certified Tester Foundation Level",
    subtitle: "ISTQB",
    url: "https://www.istqb.org/",
    description: "Foundation level certification in software testing principles and practices, validating expertise in QA methodologies.",
  },
];
---

<section
  id="about"
  class="relative py-16 md:py-24 px-8 sm:px-6 lg:px-8 bg-background overflow-visible"
  role="region"
  aria-labelledby="about-heading"
  data-testid="page-about"
>
  {/* Background image */}
  <div class="absolute inset-0 z-0 overflow-hidden">
    <AImage
      src={aboutBg}
      alt=""
      preset="hero"
      class="w-full h-full object-cover"
      aria-hidden="true"
    />
    <div class="absolute inset-0 bg-background/50"></div>
  </div>
  
  <div class="max-w-7xl mx-auto relative z-10">
    {/* Section Headline */}
    <h2
      id="about-heading"
      class="text-3xl md:text-4xl lg:text-5xl font-orbitron font-bold text-center mb-12 md:mb-16"
    >
      <DecryptedText
        client:visible
        text="Who am I?"
        speed={60}
        sequential={true}
        revealDirection="start"
        className="text-neon-lime text-shadow-neon"
        encryptedClassName="text-primary/40"
        parentClassName="block"
      />
    </h2>

    {/* Two Column Layout */}
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16">
      {/* Left Column - Profile Card (Sticky) */}
      <div class="flex items-start justify-center pt-8 md:pt-12 lg:sticky lg:top-20 lg:self-start">
        <div class="w-full max-w-xs lg:max-w-sm">
          <ProfileCard
            client:visible
            name="Vasileios Politeiadis"
            title="Senior QA Automation Engineer & Full-Stack Developer"
            status="Online"
            contactText="Contact Me"
            avatarUrl={profileImageSrc}
            showUserInfo={true}
            enableTilt={true}
            enableMobileTilt={false}
            onContactClick={() => {
              // Scroll to contact section
              const contactSection = document.getElementById('contact');
              if (contactSection) {
                contactSection.scrollIntoView({ behavior: 'smooth' });
              }
            }}
          />
        </div>
      </div>

      {/* Right Column - Content */}
      <div class="space-y-8 flex flex-col items-center" data-testid="about-main-content">
        <div class="w-full max-w-2xl">
        {/* Introduction Paragraph */}
        <p
          class="text-sm md:text-base text-matrix-white/90 leading-relaxed mb-6 text-animation"
          data-testid="about-hero-content"
        >
          I'm a Quality Assurance Automation Specialist and Full-stack Developer with 7+ years of experience building reliable software. I've worked on everything from enterprise-level European Commission projects to fast-moving startups, where I learned to take products from concept to production. As a freelancer, I've designed and built websites and applications for clients across various industries. This mix of corporate, startup, and freelance work has taught me that quality and reliability matter regardless of the environment.
        </p>

        {/* Work Experience Section */}
        <div>
          <h3 
            class="text-xl md:text-2xl font-orbitron font-bold text-neon-lime mb-1 md:mb-6 section-heading-neon"
          >
            Work Experience
          </h3>
          <div class="space-y-0">
            {workExperience.map((job) => (
              <TimelineItem item={job} />
            ))}
          </div>
        </div>

        {/* Education Section */}
        <div>
          <h3 
            class="text-xl md:text-2xl font-orbitron font-bold text-neon-lime mb-1 md:mb-6 section-heading-neon"
          >
            Education
          </h3>
          <div class="space-y-0">
            {education.map((edu) => (
              <TimelineItem item={edu} />
            ))}
          </div>
        </div>

        {/* Certifications Section */}
        <div>
          <h3 
            class="text-xl md:text-2xl font-orbitron font-bold text-neon-lime mb-1 md:mb-6 section-heading-neon"
          >
            Certifications
          </h3>
          <div class="space-y-0">
            {certifications.map((cert) => (
              <TimelineItem item={cert} />
            ))}
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import { autoInitTextReveal } from '../lib/animations';

  // Initialize text reveal animations for about section
  autoInitTextReveal();
</script>
