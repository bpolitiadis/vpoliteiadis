---
import { getImage } from 'astro:assets';
import HeroSection from './HeroSection.tsx';
import vasileiosIllustration from '../../assets/images/vasileios-illustration.webp';
import laptopIllustration from '../../assets/images/laptop-illustration.webp';

// Generate optimized image data for React component
const vasileiosImg = await getImage({
  src: vasileiosIllustration,
  widths: [480, 800, 1200],
  format: 'webp',
});

const laptopImg = await getImage({
  src: laptopIllustration,
  widths: [480, 800, 1200],
  format: 'webp',
});

// Generate AVIF srcsets
const vasileiosAvif480 = await getImage({ src: vasileiosIllustration, width: 480, format: 'avif' });
const vasileiosAvif800 = await getImage({ src: vasileiosIllustration, width: 800, format: 'avif' });
const laptopAvif480 = await getImage({ src: laptopIllustration, width: 480, format: 'avif' });
const laptopAvif800 = await getImage({ src: laptopIllustration, width: 800, format: 'avif' });
const laptopAvif1200 = await getImage({ src: laptopIllustration, width: 1200, format: 'avif' });

// Generate WebP srcsets
const vasileiosWebp480 = await getImage({ src: vasileiosIllustration, width: 480, format: 'webp' });
const vasileiosWebp800 = await getImage({ src: vasileiosIllustration, width: 800, format: 'webp' });
const laptopWebp480 = await getImage({ src: laptopIllustration, width: 480, format: 'webp' });
const laptopWebp800 = await getImage({ src: laptopIllustration, width: 800, format: 'webp' });
const laptopWebp1200 = await getImage({ src: laptopIllustration, width: 1200, format: 'webp' });

// Prepare image data for React component
const vasileiosImageData = {
  src: vasileiosImg.src,
  srcSet: `${vasileiosWebp480.src} 480w, ${vasileiosWebp800.src} 800w`,
  avifSrcSet: `${vasileiosAvif480.src} 480w, ${vasileiosAvif800.src} 800w`,
  width: vasileiosIllustration.width || 1177,
  height: vasileiosIllustration.height || 1374,
};

const laptopImageData = {
  src: laptopImg.src,
  srcSet: `${laptopWebp480.src} 480w, ${laptopWebp800.src} 800w, ${laptopWebp1200.src} 1200w`,
  avifSrcSet: `${laptopAvif480.src} 480w, ${laptopAvif800.src} 800w, ${laptopAvif1200.src} 1200w`,
  width: laptopIllustration.width || 559,
  height: laptopIllustration.height || 386,
};
---

<section
  class="relative w-full h-full flex flex-col justify-between"
  aria-label="Intro hero"
  data-testid="hero-intro-section"
>
  <!-- React HeroSection with GSAP animations -->
  <HeroSection 
    client:load
    vasileiosIllustration={vasileiosImageData}
    laptopIllustration={laptopImageData}
  />
</section>
