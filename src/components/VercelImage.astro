---
export interface Props {
  src: string;
  alt: string;
  width?: number;
  quality?: number;
  class?: string;
  sizes?: string;
  loading?: 'eager' | 'lazy';
  decoding?: 'auto' | 'sync' | 'async';
  fetchpriority?: 'high' | 'low' | 'auto';
}

const {
  src,
  alt,
  width = 1200,
  quality = 75,
  class: className = '',
  sizes = '100vw',
  loading = 'lazy',
  decoding = 'async',
  fetchpriority = 'auto',
} = Astro.props as Props;

const optimizedURL = import.meta.env.MODE === 'production'
  ? `/_vercel/image?url=${encodeURIComponent(src)}&w=${width}&q=${quality}`
  : src;
---
<img src={optimizedURL} alt={alt} class={className} sizes={sizes} loading={loading} decoding={decoding} fetchpriority={fetchpriority} />


