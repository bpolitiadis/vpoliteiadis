---
import ProjectCard from './ProjectCard.astro';
import AImage from './media/AImage.astro';
import DecryptedText from './DecryptedText';
import upiriaCover from '../assets/images/upiria-cover.webp';
import casacapoeiraCover from '../assets/images/casacapoeira-cover.webp';
import projectsBg from '../assets/images/projects-bg.webp';

interface Project {
  title: string;
  description: string;
  website: string;
  image: typeof upiriaCover | typeof casacapoeiraCover;
  technologies: string[];
}

const projects: Project[] = [
  {
    title: "Upiria",
    description: "Joined Upiria at a critical early stage and bridged frontend development with a scalable testing framework, enabling rapid product evolution with confidence.",
    website: "https://www.upiria.com",
    image: upiriaCover,
    technologies: ["ReactJS", "PHP", "Playwright", "MySQL", "AWS"],
  },
  {
    title: "Casa Capoeira",
    description: "Built a production-ready multilingual CMS for Capoeira academies, enabling seamless management of events, blog posts, and media galleries across global communities.",
    website: "https://www.casacapoeira.org",
    image: casacapoeiraCover,
    technologies: ["Next.js", "Supabase", "TypeScript", "Playwright", "Prisma"],
  },
];
---

<section
  id="projects"
  class="relative py-24 md:py-32 lg:py-40 xl:py-48 px-4 sm:px-6 lg:px-8 bg-background overflow-visible min-h-[120vh] md:min-h-[100vh]"
  role="region"
  aria-labelledby="projects-heading"
  data-testid="page-projects"
>
  {/* Background image */}
  <div class="absolute inset-0 z-0 overflow-hidden">
    <AImage
      src={projectsBg}
      alt=""
      preset="hero"
      class="w-full h-full object-cover object-center"
      aria-hidden="true"
    />
    <div class="absolute inset-0 bg-background/50"></div>
  </div>

  {/* Background decorative elements */}
  <div class="absolute inset-0 z-0 overflow-hidden pointer-events-none">
    <div class="absolute top-0 left-1/4 w-px h-32 bg-gradient-to-b from-primary/20 to-transparent" />
    <div class="absolute top-0 right-1/4 w-px h-32 bg-gradient-to-b from-secondary/20 to-transparent" />
    <div class="absolute bottom-0 left-1/2 w-px h-24 bg-gradient-to-t from-primary/10 to-transparent" />
  </div>

  <div class="max-w-7xl mx-auto relative z-10">
    {/* Section Headline */}
    <div class="text-center mb-12 md:mb-16">
      <h2
        id="projects-heading"
        class="text-3xl md:text-4xl lg:text-5xl font-orbitron font-bold mb-3"
      >
        <DecryptedText
          client:visible
          text="Featured Projects"
          speed={60}
          sequential={true}
          revealDirection="start"
          className="text-neon-lime text-shadow-neon"
          encryptedClassName="text-primary/40"
          parentClassName="block"
        />
      </h2>
      <p class="text-base md:text-lg text-matrix-white/70 font-inter max-w-2xl mx-auto">
        Projects worth exploring
      </p>
    </div>

    {/* Projects Grid - Centered with Equal Sizing */}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-5xl mx-auto">
      {projects.map((project, index) => (
        <ProjectCard
          project={project}
          data-project-card={index}
        />
      ))}
    </div>
  </div>
</section>

<script>
  import { autoInitTextReveal } from '../lib/animations';

  // Initialize text reveal animations for project cards
  autoInitTextReveal();
</script>
