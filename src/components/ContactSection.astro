---
import ContactForm from './contact/ContactForm';
import ContactCards from './contact/ContactCards.astro';
import AImage from './media/AImage.astro';
import DecryptedText from './DecryptedText';
import contactBg from '../assets/images/contact-bg.webp';
---

<section
  id="contact"
  class="relative py-24 md:py-32 lg:py-40 xl:py-48 px-4 sm:px-6 lg:px-8 bg-background overflow-visible min-h-[120vh] md:min-h-[100vh]"
  role="region"
  aria-labelledby="contact-heading"
  data-contact-section
  data-testid="page-contact"
>
  {/* Background image - isolated from content changes */}
  <div class="absolute inset-0 z-0 overflow-hidden" style="transform: translateZ(0); will-change: auto;">
    <AImage
      src={contactBg}
      alt=""
      preset="hero"
      class="w-full h-full object-cover object-center"
      aria-hidden="true"
    />
    <div class="absolute inset-0 bg-background/50"></div>
  </div>

  {/* Background decorative elements */}
  <div class="absolute inset-0 z-0 overflow-hidden pointer-events-none">
    <div class="absolute top-0 left-1/4 w-px h-32 bg-gradient-to-b from-primary/20 to-transparent" />
    <div class="absolute top-0 right-1/4 w-px h-32 bg-gradient-to-b from-secondary/20 to-transparent" />
    <div class="absolute bottom-0 left-1/2 w-px h-24 bg-gradient-to-t from-primary/10 to-transparent" />
  </div>

  <div class="max-w-7xl mx-auto relative z-10">
    {/* Section Headline */}
    <h2
      id="contact-heading"
      class="text-3xl md:text-4xl lg:text-5xl font-orbitron font-bold text-center mb-12 md:mb-16"
      data-animate="reveal"
    >
      <DecryptedText
        client:visible
        text="Contact"
        speed={60}
        sequential={true}
        revealDirection="start"
        className="text-neon-lime text-shadow-neon"
        encryptedClassName="text-primary/40"
        parentClassName="block"
      />
    </h2>
    
    {/* Section Description */}
    <p class="text-center text-foreground/80 text-lg md:text-xl mb-12 md:mb-16 max-w-2xl mx-auto" data-animate="reveal">
      Let's collaborate on your next project or discuss creative opportunities
    </p>

    {/* Contact Content */}
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-10 items-stretch">
      {/* Left column - Contact Form */}
      <div class="flex flex-col" data-animate="reveal">
        <ContactForm client:visible />
      </div>

      {/* Right column - Contact Cards */}
      <div class="flex flex-col" data-animate="reveal">
        <ContactCards />
      </div>
    </div>
  </div>
</section>

