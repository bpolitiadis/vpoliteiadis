---
// Prerender this page for optimal performance
export const prerender = true;

import MainLayout from '../layouts/MainLayout.astro';
import HeroSection from '../components/hero/HeroSection.astro';
import LetterGlitch from '../components/LetterGlitch.tsx';
import AboutSection from '../components/AboutSection.astro';
import ProjectsSection from '../components/ProjectsSection.astro';
import CreativeLabSection from '../components/CreativeLabSection.astro';
import ContactSection from '../components/ContactSection.astro';
import { getImage } from 'astro:assets';
import vasileiosProfile from '../assets/images/vasileios-profile.webp';

// Get optimized profile image URL
const profileImage = await getImage({src: vasileiosProfile, width: 800});


// Enhanced structured data for homepage
const homeStructuredData = {
  "@type": "WebSite",
  "name": "Vasileios Politeiadis - Portfolio",
  "description": "Professional portfolio of Vasileios Politeiadis, Senior QA Automation Specialist and Full-Stack Developer specializing in European Commission projects, React/Next.js development, and AI automation solutions.",
  "url": Astro.site?.toString() ?? "https://vpoliteiadis.dev",
  "author": {
    "@type": "Person",
    "name": "Vasileios Politeiadis",
    "jobTitle": "Senior QA Automation Specialist & Full-Stack Developer"
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": `${Astro.site?.toString() ?? "https://vpoliteiadis.dev"}/search?q={search_term_string}`,
    "query-input": "required name=search_term_string"
  }
};
---

<MainLayout 
  title="Vasileios Politeiadis | QA & Full-Stack Developer"
  description="Senior QA Automation Specialist & Full-Stack Developer. Expert in Java automation, React/Next.js, and AI solutions. View portfolio and projects."
  currentPath="/"
  keywords={[
    'Vasileios Politeiadis',
    'QA Automation Specialist',
    'QA Automation Engineer',
    'Full-Stack Developer',
    'Next.js Developer',
    'React Developer',
    'European Commission Projects',
    'Java Selenium Testing',
    'Playwright Testing',
    'TypeScript Developer',
    'AI Automation',
    'Professional Portfolio',
    'Online CV'
  ]}
  structuredData={homeStructuredData}
>
  <!-- Enhanced Hero Section - Full viewport height with better spacing distribution -->
  <section class="relative min-h-[calc(100svh-48px-60px)] sm:min-h-[calc(100vh-56px-60px)] overflow-visible flex flex-col justify-between py-1 sm:py-8" role="banner" aria-labelledby="hero-heading" data-testid="page-home">
    <!-- Full-screen glitch background - lazy load when visible -->
    <div class="absolute inset-0 pointer-events-none opacity-20 z-0" aria-hidden="true">
      <LetterGlitch client:visible />
    </div>
    
    <!-- Hero content with better spacing -->
    <div class="flex-1 flex items-center justify-center">
      <HeroSection />
    </div>
  </section>

  <!-- About Section -->
  <AboutSection 
    profileImageSrc={profileImage.src}
  />

  <!-- Projects Section -->
  <ProjectsSection />

  <!-- Creative Lab Section -->
  <CreativeLabSection />

  <!-- Contact Section -->
  <ContactSection />

</MainLayout>


<style>
  /* Enhanced spacing for better visual hierarchy */
  .hero-section {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: calc(100vh - 120px);
    padding: 2rem 0;
  }
  
  /* Chat bubble area with more breathing room */
  .chat-area {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 1;
    padding: 2rem 0;
  }
  
  /* Navigation area positioned near footer */
  .nav-area {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    padding-bottom: 2rem;
  }
  
  /* Enhanced spacing for better visual breathing room */
  .spaced-content {
    margin: 1.5rem 0;
  }
  
  /* Lazy loading animations for Matrix theme */
  [data-lazy-section] {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  
  [data-lazy-section].lazy-loaded {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* Optimize animations for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    [data-lazy-section] {
      transition: none;
    }
  }
  
  /* Animation pause when tab is not visible */
  .paused * {
    animation-play-state: paused !important;
  }
  
  /* Responsive spacing adjustments */
  @media (min-width: 768px) {
    .hero-section {
      padding: 3rem 0;
    }
    
    .chat-area {
      padding: 3rem 0;
    }
    
    .nav-area {
      padding-bottom: 3rem;
    }
  }
  
  @media (min-width: 1024px) {
    .hero-section {
      padding: 4rem 0;
    }
    
    .chat-area {
      padding: 4rem 0;
    }
    
    .nav-area {
      padding-bottom: 4rem;
    }
  }
</style>
