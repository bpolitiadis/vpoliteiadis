---
import MainLayout from '../../layouts/MainLayout.astro';
import SpotifyEmbed from '../../components/SpotifyEmbed.astro';
import { getArtistAlbums } from '../../lib/spotify';

const ARTIST_ID = '3iyLSllxJjbHUi1PZOzJAm';
const albums = await getArtistAlbums(ARTIST_ID).catch(() => [] as Array<{ id: string; name: string; images: Array<{ url: string; width: number; height: number }> }>);
---

<MainLayout 
  title="Smoking Two – Visual Direction" 
  description="Art direction for Smoking Two visuals: album covers, Spotify canvases, promos, and AI videos."
  currentPath="/creative/smoking-two"
>
  <section class="relative py-12 md:py-16 px-6 bg-gradient-to-b from-primary/5 to-transparent">
    <div class="max-w-6xl mx-auto">
      <a href="/creative" class="text-primary hover:underline inline-flex items-center gap-2 mb-6">
        ← Back to Creative Lab
      </a>

      <header class="mb-8 text-center">
        <h1 class="font-orbitron text-4xl md:text-5xl text-primary mb-3">Smoking Two</h1>
        <p class="text-muted-foreground max-w-3xl mx-auto">
          Screaming from the streets of Thessaloniki, Greece, Smoking Two is the brainchild of <span class="text-foreground font-medium">022</span> on the mic and <span class="text-foreground font-medium">Black Smoke</span> behind the boards. They craft raw, unfiltered hip-hop that hits different. I serve as their visual director, using AI tools to create album covers, social media promos, and experimental music video concepts that capture their gritty, underground aesthetic.
        </p>
      </header>

      <div class="mt-8">
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-orbitron text-primary text-lg md:text-xl">Featured Tracks</h3>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-6">
          <div>
            <h4 class="mb-2 text-muted-foreground">VROMIKO</h4>
            <SpotifyEmbed
              src="https://open.spotify.com/embed/track/6jWC2VIg20GWGwxgVjrHcv?utm_source=generator"
              height={152}
              title="VROMIKO — Spotify player"
            />
          </div>
          <div>
            <h4 class="mb-2 text-muted-foreground">Elixirio</h4>
            <SpotifyEmbed
              src="https://open.spotify.com/embed/track/1uaTqm4URDRbcE7sNghiAd?utm_source=generator"
              height={152}
              title="Elixirio — Spotify player"
            />
          </div>
          <div>
            <h4 class="mb-2 text-muted-foreground">Kommati Miso</h4>
            <SpotifyEmbed
              src="https://open.spotify.com/embed/track/216WbbWsel9hBAaCOsh3my?utm_source=generator"
              height={152}
              title="Kommati Miso — Spotify player"
            />
          </div>
          <div>
            <h4 class="mb-2 text-muted-foreground">To Yfos</h4>
            <SpotifyEmbed
              src="https://open.spotify.com/embed/track/2lU4NStWNfWP28yetFm0S3?utm_source=generator"
              height={152}
              title="To Yfos — Spotify player"
            />
          </div>
        </div>
      </div>

      {albums.length > 0 && (
        <div class="mt-12">
          <h3 class="font-orbitron text-primary text-lg md:text-xl mb-4">Discography Highlights</h3>
          <ul class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
            {albums.map((a) => {
              const img = (a.images && (a.images[1] ?? a.images[0])) as { url: string; width: number; height: number } | undefined;
              return (
                <li class="group" aria-label={a.name}>
                  <a href={`https://open.spotify.com/album/${a.id}`} target="_blank" rel="noopener noreferrer">
                    {img ? (
                      <img
                        src={img.url}
                        alt={`${a.name} album cover`}
                        width={img.width ?? 300}
                        height={img.height ?? 300}
                        loading="lazy"
                        decoding="async"
                        class="w-full h-auto rounded-xl border border-border/30 group-hover:shadow-neon transition"
                      />
                    ) : (
                      <div class="aspect-square w-full rounded-xl border border-border/30 bg-muted"></div>
                    )}
                    <p class="mt-2 text-sm text-muted-foreground">{a.name}</p>
                  </a>
                </li>
              );
            })}
          </ul>
        </div>
      )}
    </div>
  </section>
</MainLayout>


